<%page expression_filter="h"/>
<%namespace name='static' file='static_content.html'/>
<%! from django.utils.translation import ugettext as _  %>
<link rel="stylesheet" href="${static.url("css/lms-carousel.css")}">

<section class="courses-container">
  
  <%
      courses_highlighted=[]
      courses_edxorg=[]
      for course in courses:

                if course.display_org_with_default.lower() == "edxorg":
	        	courses_edxorg.append(course)		
		endif

      courses_highlighted = sorted(courses, key=lambda course: course.start)
      courses_edxorg = sorted(courses_edxorg, key=lambda course: course.start)
  %>

  <section class="highlighted-courses">
    <div class="section-title">
        <h5>
            <span class="text">Cursos destacados</span>
        </h5>
    </div>

    % if settings.FEATURES.get('COURSES_ARE_BROWSABLE'):
      <section class="courses">

	<div id="carousel-courses-highlighted" class="carousel slide" data-ride="carousel">
    	  <div class="carousel-inner">
            <div class="carousel-item active">
            <div class="row">
 	    % for course in courses_highlighted[:settings.HOMEPAGE_COURSE_MAX]:
                <div class="col-md-3">
		<%include file="course.html" args="course=course" />
                </div>
                % if (loop.index % 4) == 3 and loop.index < (len(courses_highlighted) - 1) :
                  </div>
                  </div>
                  <div class="carousel-item">
                  <div class="row">
                % endif
            % endfor
            </div>
            </div>
	  </div>

    	  <a class="carousel-control-prev" href="#carousel-courses-highlighted" style="color:#bada55;" role="button" data-slide="prev">
    	    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    	    <span class="sr-only">Anterior</span>
  	  </a>
  	  <a class="carousel-control-next" href="#carousel-courses-highlighted" role="button" data-slide="next">
    	    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    	    <span class="sr-only">Siguiente</span>
  	  </a>
	</div>

      </section>
      ## in case there are courses that are not shown on the homepage, a 'View all Courses' link should appear
      % if settings.HOMEPAGE_COURSE_MAX and len(courses) > settings.HOMEPAGE_COURSE_MAX:
      <div class="courses-more">
        <a class="courses-more-cta" href="${marketing_link('COURSES')}"> ${_("View all Courses")} </a>
      </div>
      % endif
   % endif
  </section>

  <section class="edxorg-courses">
    <div class="section-title">
        <h5>
            <span class="text">Cursos realizados en edx.org</span>
        </h5>
    </div>

    % if settings.FEATURES.get('COURSES_ARE_BROWSABLE'):
      <section class="courses">

        <div id="carousel-courses-edxorg" class="carousel slide" data-ride="carousel">
          <div class="carousel-inner">
            <div class="carousel-item active">
            <div class="row">
            % for course in courses_edxorg[:settings.HOMEPAGE_COURSE_MAX]:
                <div class="col-md-3">
                <%include file="course.html" args="course=course" />
                </div>
                % if loop.index % 4 and loop.index < (len(courses_edxorg) - 1) :
                  </div>
                  </div>
                  <div class="carousel-item">
                  <div class="row">
                % endif
            % endfor
            </div>
            </div>
          </div>

          <a class="carousel-control-prev" href="#carousel-courses-edxorg" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Anterior</span>
          </a>
          <a class="carousel-control-next" href="#carousel-courses-edxorg" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Siguiente</span>
          </a>
        </div>

      </section>
      ## in case there are courses that are not shown on the homepage, a 'View all Courses' link should appear
      % if settings.HOMEPAGE_COURSE_MAX and len(courses) > settings.HOMEPAGE_COURSE_MAX:
      <div class="courses-more">
        <a class="courses-more-cta" href="${marketing_link('COURSES')}"> ${_("View all Courses")} </a>
      </div>
      % endif
   % endif
  </section>

</section>
